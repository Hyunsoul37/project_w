(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[203],{4533:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/community/post",function(){return n(8781)}])},8781:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return w},default:function(){return y}});var i=n(1799),s=n(5893),r=n(7568),l=n(9534),a=n(828),c=n(6305),o=n(655),u=n(7294),d=n(8810),p=n.n(d),h=n(9503),f=n(8193),x=n(6154),m=n(1163),v=n(9473),j=["레드","화이트","로제","스파클링","주정강화"],_=function(e){var t,n=e.reviewId,i=e.edit,d=(0,l.Z)(e,["reviewId","edit"]),_=(0,v.v9)(function(e){return e.user}),g=(0,u.useRef)(null),w=(0,u.useRef)([]),y=(0,a.Z)((0,u.useState)(0),2),P=y[0],N=y[1],S=(0,a.Z)((0,u.useState)(null),2),Z=S[0],k=S[1],B=(0,a.Z)((0,u.useState)(null),2),C=B[0],b=B[1],I=(0,a.Z)((0,u.useState)(),2),O=I[0],R=I[1],E=(0,a.Z)((0,u.useState)([]),2),T=E[0],W=E[1],D=(0,a.Z)((0,u.useState)([]),2),U=D[0],A=D[1],F=(0,a.Z)((0,u.useState)([]),2),L=F[0],M=F[1],X=(0,a.Z)((0,u.useState)(!1),2),H=X[0],z=X[1],G=(0,a.Z)((0,u.useState)(0),2),J=G[0],V=G[1],Y=(0,a.Z)((0,u.useState)(""),2),q=Y[0],K=Y[1],Q=(0,a.Z)((0,u.useState)(""),2),$=Q[0],ee=Q[1],et=(0,a.Z)((0,u.useState)(""),2),en=et[0],ei=et[1],es=(0,a.Z)((0,u.useState)(0),2),er=es[0],el=es[1],ea=(0,a.Z)((0,u.useState)(""),2),ec=ea[0],eo=ea[1],eu=(0,a.Z)((0,u.useState)(""),2),ed=eu[0],ep=eu[1],eh=(0,a.Z)((0,u.useState)([]),2),ef=eh[0],ex=eh[1],em=(0,m.useRouter)(),ev=(0,u.useRef)(null),ej=(0,a.Z)((0,u.useState)(!1),2),e_=ej[0],eg=ej[1],ew=(0,a.Z)((0,u.useState)(!1),2),ey=ew[0],eP=ew[1];(0,u.useEffect)(function(){"true"===i&&d.reviewImgs&&(N(d.starPoint),k(d.reviewImgs[0]),b(d.reviewImgs[0]),A(d.reviewImgs.filter(function(e,t){return null!==e&&0!==t})),M(d.reviewImgs.filter(function(e,t){return null!==e&&0!==t})),V(d.reviewImgs.filter(function(e,t){return null!==e&&0!==t}).length),K(d.wineType),ee(d.reviewTitle),ei(d.wineName),el(d.winePrice),eo(d.desc),ep(d.hashTag.join(",")))},[i]);var eN=function(e,t){if(null!==e.target.files){var n=e.target.files[0],s=(0,c.Z)(T);if(s.length>t+1?W(s.map(function(e,i){return i===t?n:e})):(s.push(n),W(s)),"true"===i&&(ex((0,c.Z)(ef).concat([L[t]])),L)){var r=(0,c.Z)(L).filter(function(e,n){return t!==n});M((0,c.Z)(r))}if(n&&"image"===n.type.substring(0,5)){var l=new FileReader;l.onload=function(){if(U){var e=(0,c.Z)(U);e[t]=l.result,A(e)}},l.readAsDataURL(n)}}},eS=function(e,t){var n;e.stopPropagation(),null===(n=w.current[t])||void 0===n||n.click()},eZ=function(e,t){t.stopPropagation(),ex((0,c.Z)(ef).concat([U[e]]));var n=U.filter(function(t,n){return n!==e});A(n),M(n),V(n.length)},ek=(t=(0,r.Z)(function(e){var t,s,r;return(0,o.__generator)(this,function(l){if(e.preventDefault(),eP(!0),""!==$&&null!==Z&&""!==q&&0!==P&&""!==en&&""!==ec||i||alert("필수 정보는 다 입력해야합니다."),t=new FormData,"true"===i){if(console.log(C),(s="null"!==C?[C].concat((0,c.Z)(L)):(0,c.Z)(L)).length<5)for(r=s.length;r<5;r++)s.push(null);t.append("review",JSON.stringify({reviewId:n,reviewTitle:$,wineType:q,wineName:en,winePrice:er,starPoint:P,desc:ec,writerId:_.userData.data.memberInfo.pid,hashTag:""===ed.split(",")[0]?[]:ed.split(","),reviewImgs:s})),ef.length>0&&t.append("deleteUrl",ef.toString())}else t.append("review",JSON.stringify({reviewTitle:$,wineType:q,wineName:en,winePrice:er,starPoint:P,desc:ec,writerId:_.userData.data.memberInfo.pid,hashTag:""===ed.split(",")[0]?[]:ed.split(",")}));return O&&t.append("files",O),T.map(function(e){return t.append("files",e)}),(0,x.Z)({method:"".concat("true"===i?"put":"post"),url:"/api/community/review",data:t,headers:{"Content-Type":"multipart/form-data"}}).then(function(e){var t;null===(t=ev.current)||void 0===t||t.showModal(),eg(!0)}).catch(function(e){console.log(e)}),[2]})}),function(e){return t.apply(this,arguments)});return(0,s.jsx)("div",{className:p().PostBackground,children:(0,s.jsx)("div",{className:"maxframe",children:(0,s.jsxs)("div",{className:p().Post,children:[(0,s.jsxs)("div",{className:p().section,children:[(0,s.jsxs)("div",{className:p().title,children:[(0,s.jsx)("h3",{children:"커뮤니티 작성 가이드"}),(0,s.jsx)("p",{children:"원활한 커뮤니티 작성을 위해 꼭 확인해주세요"})]}),(0,s.jsxs)("div",{className:p().postRole,children:[(0,s.jsxs)("p",{children:["간단한 자기 소개 후 와인에 관한 이야기를 최대한 자세하게 들려주세요.",(0,s.jsx)("span",{style:{color:"#B0B0B0",marginLeft:"15px"},children:"ex) 당도는 낮은 편이지만 제 입에는 달게 느껴졌습니다..."})]}),(0,s.jsx)("p",{children:"사진 첨부 시 용량은 장당 최대 20MB까지 업로드할 수 있고, jpg, png, gif 포맷을 지원합니다."}),(0,s.jsx)("p",{children:"사진은 최대 5장까지 등록 가능합니다."}),(0,s.jsx)("p",{children:"글 작성과 이미지 업로드 시 , 타인의 지식재산권을 침해하지 않도록 유의해주세요."})]})]}),(0,s.jsxs)("div",{className:p().section,children:[(0,s.jsxs)("div",{className:p().title,children:[(0,s.jsx)("h3",{children:"필수 정보 입력"}),(0,s.jsx)("p",{children:"와인 정보를 확인하는데 꼭 필요한 정보이니 최대한 꼼꼼하게 작성해주세요."}),(0,s.jsxs)("p",{children:[(0,s.jsx)("span",{style:{color:"red"},children:"*"}),"표시가 있는 칸은 필수 입력 값 입니다."]})]}),(0,s.jsx)("div",{className:p().postContents,children:(0,s.jsxs)("form",{children:[(0,s.jsxs)("div",{className:p().contents_title,children:[(0,s.jsxs)("h3",{children:["제목 ",(0,s.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,s.jsx)("input",{id:"title",type:"text",value:$,onChange:function(e){return ee(e.target.value)},placeholder:"게시글 제목을 입력해주세요."})]}),(0,s.jsxs)("div",{className:p().contents_titleImage,children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{children:["대표이미지 ",(0,s.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,s.jsx)("p",{style:{fontSize:"13px",color:"var(--primary)"},children:"(최대 20MB)"})]}),(0,s.jsx)("div",{className:p().imageBtn,onClick:function(e){var t;e.stopPropagation(),null===(t=g.current)||void 0===t||t.click()},children:Z?(0,s.jsx)("img",{src:Z}):(0,s.jsx)("div",{style:{color:"white",marginBottom:"0px"},children:"image"})}),(0,s.jsx)("input",{className:p().imageinput,ref:g,name:"image",id:"image",type:"file",accept:"image/*",onChange:function(e){if(null!=e.target.files){var t=e.target.files[0];if(R(t),t&&"image"===t.type.substring(0,5)){var n=new FileReader;n.onload=function(){"true"===i&&(ex((0,c.Z)(ef).concat([C])),b(null)),k(n.result)},n.readAsDataURL(t)}}}})]}),(0,s.jsxs)("div",{className:p().contents_titleImage,children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{children:"추가이미지"}),(0,s.jsx)("p",{style:{fontSize:"13px",color:"var(--primary)"},children:"(1장당 최대 20MB)"})]}),(function(){for(var e=function(e){t.push((0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:p().imageBtn,onClick:function(t){return eS(t,e)},children:U[e]?(0,s.jsxs)("div",{children:[(0,s.jsx)("img",{src:U[e]}),(0,s.jsx)("p",{onClick:function(t){return eZ(e,t)},children:"X"})]}):(0,s.jsx)("div",{style:{color:"white",marginBottom:"0px"},children:"image"})}),(0,s.jsx)("input",{className:p().imageinput,ref:function(t){return w.current[e]=t},name:"image",id:"image",type:"file",accept:"image/*",onChange:function(t){return eN(t,e)}})]}))},t=[],n=0;n<J;n++)e(n);return t})().map(function(e,t){return e}),J<4?(0,s.jsx)("div",{className:p().imagePlusBtn,onClick:function(){return V(J+1)},children:(0,s.jsx)("div",{style:{color:"#a6a6a6",marginBottom:"0px"},children:(0,s.jsx)(f.Lfi,{})})}):""]}),(0,s.jsxs)("div",{className:H?p().listActive:p().listUnactive,children:[(0,s.jsxs)("h3",{children:["와인타입 ",(0,s.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:p().winetype_Selector,onClick:function(){return z(!H)},children:[(0,s.jsx)("span",{className:""===q?"":p().colorBlack,children:""===q?"와인타입을 선택해 주세요":q}),(0,s.jsx)(f.cuw,{})]}),(0,s.jsx)("div",{className:[p().winetype_Selector_list,H?p().active:p().unactive].join(" "),children:(0,s.jsx)("ul",{children:j.map(function(e,t){return(0,s.jsx)("li",{onClick:function(){K(e),z(!1)},children:e},e)})})})]}),(0,s.jsx)("h3",{children:"구매가격"}),(0,s.jsx)("input",{type:"number",placeholder:"구매가격을 입력해주세요.",value:0===er?"":er,onChange:function(e){return el(Number(e.target.value))}})]}),(0,s.jsxs)("div",{className:p().contents_wineinfo,children:[(0,s.jsxs)("h3",{children:["와인명 ",(0,s.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,s.jsx)("input",{type:"text",placeholder:"와인명을 입력해주세요.",value:en,onChange:function(e){return ei(e.target.value)}}),(0,s.jsx)("h3",{children:"해시태그"}),(0,s.jsx)("input",{type:"text",placeholder:"해시태그는 콤마(,)로 구분해주세요.",value:ed,onChange:function(e){return ep(e.target.value)}})]}),(0,s.jsxs)("div",{className:p().contents_wineStar,children:[(0,s.jsxs)("h3",{children:["와인별점 ",(0,s.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,s.jsx)(h.Z,{rating:P,starDimension:"25px",starHoverColor:"#61002E",starRatedColor:"#61002E",changeRating:function(e){return N(e)}})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{children:["내용 ",(0,s.jsx)("span",{style:{color:"red"},children:"*"})]}),(0,s.jsx)("textarea",{placeholder:"내용을 입력해주세요.",value:ec,onChange:function(e){return eo(e.target.value)}})]}),(0,s.jsx)("div",{className:p().btnWrapper,children:"true"===i?(0,s.jsx)("button",{disabled:ey,onClick:ek,children:"수정"}):(0,s.jsx)("button",{disabled:ey,onClick:ek,children:"등록"})})]})})]}),(0,s.jsxs)("dialog",{style:e_?{display:"flex"}:{display:"none"},className:p().modal,ref:ev,children:[(0,s.jsx)("p",{children:"저장되었습니다."}),(0,s.jsx)("button",{onClick:function(){var e;null===(e=ev.current)||void 0===e||e.close(),eg(!1),em.push({pathname:"/community"})},children:"확인"})]})]})})})},g=n(8606),w=!0,y=function(e){var t=e.reviewId,n=e.edit,r=e.data;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(g.Z,{title:"커뮤니티 새글작성"}),-1!==t?(0,s.jsx)(_,(0,i.Z)({reviewId:t,edit:n},r)):(0,s.jsx)(_,{reviewId:t,edit:n})]})}},8606:function(e,t,n){"use strict";var i=n(5893),s=n(9008),r=n.n(s);t.Z=function(e){var t=e.title;return(0,i.jsx)(r(),{children:(0,i.jsxs)("title",{children:["WAGU | ",t]})})}},8810:function(e){e.exports={Post:"Post_Post__FeBaB",PostBackground:"Post_PostBackground__cWdOf",section:"Post_section__hqVvO",title:"Post_title__nWkPy",postRole:"Post_postRole__vvxWn",postContents:"Post_postContents__jUjyW",imageBtn:"Post_imageBtn__z3xxG",imagePlusBtn:"Post_imagePlusBtn__IBSYw",imageinput:"Post_imageinput__6tEM3",contents_title:"Post_contents_title__TXE_Z",btnWrapper:"Post_btnWrapper__WAlnc",winetype_Selector:"Post_winetype_Selector__XFUsH",colorBlack:"Post_colorBlack__Hx6PR",winetype_Selector_list:"Post_winetype_Selector_list__ceDEI",active:"Post_active__iSS6Y",unactive:"Post_unactive__kE_NB",listActive:"Post_listActive__0yp75",listUnactive:"Post_listUnactive__kDLHf",modal:"Post_modal__LWfkV"}},9008:function(e,t,n){e.exports=n(3121)},9534:function(e,t,n){"use strict";function i(e,t){if(null==e)return{};var n,i,s=function(e,t){if(null==e)return{};var n,i,s={},r=Object.keys(e);for(i=0;i<r.length;i++)n=r[i],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(i=0;i<r.length;i++)n=r[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}n.d(t,{Z:function(){return i}})}},function(e){e.O(0,[503,774,888,179],function(){return e(e.s=4533)}),_N_E=e.O()}]);