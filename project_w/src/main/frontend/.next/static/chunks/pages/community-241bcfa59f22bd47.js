(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[44],{8826:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/community",function(){return i(8573)}])},8573:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return k}});var t=i(5893),r=i(7294),s=i(9473),u=i(1799),a=i(828),o=i(8658),l=i.n(o),c=i(9684),m=i.n(c),d=i(9481),_=i(1664),C=i.n(_),v=function(e){var n=(0,a.Z)((0,r.useState)(e.reviewLike),2),i=n[0],s=n[1],u=(0,a.Z)((0,r.useState)(),2),o=u[0],l=u[1];return((0,r.useEffect)(function(){l(e)},[e]),null===o)?(0,t.jsx)(t.Fragment,{}):(0,t.jsxs)("div",{className:m().CommunityCard,children:[(0,t.jsxs)("div",{className:m().CommunityCard_Header,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{children:null==o?void 0:o.writerNickName}),(0,t.jsx)("span",{children:"님의 포스팅"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)(d.Z,{userLike:!1,onClick:function(e){e?s(i+1):s(i-1)}}),(0,t.jsx)("span",{children:null==o?void 0:o.reviewLike})]})]}),(0,t.jsx)("div",{className:m().CommunityCard_Image,children:(0,t.jsx)(C(),{href:{pathname:"/community/detail/".concat(e.reviewId),query:{id:e.reviewId}},children:(0,t.jsx)("img",{src:null==o?void 0:o.reviewImgs[0]})})}),(0,t.jsx)("div",{className:m().CommunityCard_Contents,children:(0,t.jsxs)(C(),{href:{pathname:"/community/detail/".concat(null==o?void 0:o.reviewId),query:{id:null==o?void 0:o.reviewId}},children:[(0,t.jsx)("h4",{className:m().CommunityCard_Contents_title,children:null==o?void 0:o.reviewTitle}),(0,t.jsx)("p",{className:m().CommunityCard_Contents_text,children:null==o?void 0:o.desc})]})}),(0,t.jsx)("div",{className:m().CommunityCard_hashTag,children:null==o?void 0:o.hashTag.map(function(e){return(0,t.jsxs)("span",{children:["#",e]})})})]})},h=i(1936),x=i(3400),y=i.n(x),j=i(8193),p=["작성자(닉네임)","해시태그","와인이름"],f=function(){var e=(0,a.Z)((0,r.useState)(!1),2),n=e[0],i=e[1],s=(0,a.Z)((0,r.useState)(""),2),u=s[0],o=s[1];return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:y().ReviewFilter,children:[(0,t.jsxs)("div",{className:y().ReviewFilter_Selector,onClick:function(){return i(!n)},children:[(0,t.jsx)("p",{children:u}),(0,t.jsx)(j.cuw,{})]}),(0,t.jsxs)("div",{className:y().ReviewFilter_Input,children:[(0,t.jsx)("input",{type:"text"}),(0,t.jsx)("button",{children:"검색"})]})]}),(0,t.jsx)("div",{className:[y().ReviewFilter_Selector_list,n?y().active:y().unactive].join(" "),children:(0,t.jsx)("ul",{children:p.map(function(e,n){return(0,t.jsx)("li",{onClick:function(){o(e),i(!1)},children:e},e)})})})]})},w=i(7657),N=i(5628),R=i(1163),g=function(){var e=(0,s.v9)(function(e){return e}),n=e.review,i=e.user,o=(0,s.I0)(),c=(0,r.useRef)(null),m=(0,r.useRef)(0),d=(0,r.useRef)(null),_=(0,a.Z)((0,r.useState)(!0),2),C=_[0],x=_[1],y=(0,a.Z)((0,r.useState)(!0),2),j=y[0],p=y[1],g=(0,a.Z)((0,r.useState)(!1),2),F=g[0],k=g[1],I=(0,R.useRouter)(),S=function(){m.current>=0&&(x(!1),o((0,w.j9)(m.current)),p(!1))},b={root:null,threshold:1},T=function(e){var i=e[0];!n.isloadding&&m.current<=n.TotalpageNum&&i.isIntersecting&&(m.current++,S())};return(0,r.useEffect)(function(){var e,i=new IntersectionObserver(T,b),t=c.current;return n.isloadding||(e=window.setTimeout(function(){m.current<n.TotalpageNum-1&&p(!0)},450)),t&&i.observe(t),function(){i.disconnect(),clearTimeout(e)}},[n.isloadding,j]),(0,t.jsxs)("div",{className:"maxframe",children:[(0,t.jsxs)("div",{className:l().Community,children:[(0,t.jsx)("h1",{children:"COMMUNITY"}),(0,t.jsx)("h3",{children:"와구 회원들과의 즐거운 와인 이야기"}),(0,t.jsx)(f,{}),(0,t.jsx)("div",{className:l().btnWrapper,children:(0,t.jsx)(h.Z,{buttontext:"새글작성",buttonColor:"second",buttonSize:"m",onClick:function(){if(!0===i.isLoggedIn)I.push({pathname:"/community/post",query:{edit:!1,reviewId:-1}});else{var e;null===(e=d.current)||void 0===e||e.showModal(),k(!0)}}})}),(0,t.jsx)("div",{className:l().Community_CardWrapper,children:n.post.map(function(e,n){return(0,t.jsx)(v,(0,u.Z)({},e),"reviewCard_".concat(n))})}),n.isloadding&&!C?(0,t.jsx)(N.Z,{height:300}):null,j?(0,t.jsx)("div",{ref:c,className:l().Community_SrollChecker}):(0,t.jsx)("span",{style:{display:"inline-block",height:"250px"}})]}),(0,t.jsxs)("dialog",{style:F?{display:"flex"}:{display:"none"},className:l().modal,ref:d,children:[(0,t.jsx)("p",{children:"로그인이 필요한 기능입니다."}),(0,t.jsx)("button",{onClick:function(){var e;null===(e=d.current)||void 0===e||e.close(),k(!1),I.push({pathname:"/login",query:{returnUrl:I.asPath}},"/login")},children:"확인"})]})]})};i(6827);var F=i(8606),k=function(){var e=(0,s.I0)();return(0,r.useEffect)(function(){e((0,w.eR)())},[]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(F.Z,{title:"Community"}),(0,t.jsx)(g,{})]})}},8658:function(e){e.exports={Community:"Community_Community__a4N03",Community_CardWrapper:"Community_Community_CardWrapper__ZC1EB",Community_SrollChecker:"Community_Community_SrollChecker__2kEtj",btnWrapper:"Community_btnWrapper__1HalE",modal:"Community_modal__hvOPB"}},9684:function(e){e.exports={CommunityCard:"CommunityCard_CommunityCard__dHsvs",CommunityCard_Header:"CommunityCard_CommunityCard_Header__uz_3a",CommunityCard_Image:"CommunityCard_CommunityCard_Image__1yFRM",CommunityCard_Contents:"CommunityCard_CommunityCard_Contents__cj_Vx",CommunityCard_Contents_title:"CommunityCard_CommunityCard_Contents_title__pbFxU",CommunityCard_Contents_text:"CommunityCard_CommunityCard_Contents_text__Fe8dQ",CommunityCard_hashTag:"CommunityCard_CommunityCard_hashTag__NBQ1i"}},3400:function(e){e.exports={ReviewFilter:"ReviewFilter_ReviewFilter__LR6xR",ReviewFilter_Selector:"ReviewFilter_ReviewFilter_Selector__eMoOa",ReviewFilter_Selector_list:"ReviewFilter_ReviewFilter_Selector_list__fq1TO",active:"ReviewFilter_active__nzVoy",unactive:"ReviewFilter_unactive__l_jYU",ReviewFilter_Input:"ReviewFilter_ReviewFilter_Input__xY1Rh"}},9008:function(e,n,i){e.exports=i(3121)},6827:function(e){"use strict";e.exports=[]}},function(e){e.O(0,[296,281,664,10,774,888,179],function(){return e(e.s=8826)}),_N_E=e.O()}]);